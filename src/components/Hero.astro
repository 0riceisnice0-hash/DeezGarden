---
import { siteConfig } from '../config';

interface Props {
  title: string;
  location?: string;
  subtitle?: string;
  showCTA?: boolean;
  heroImage?: string;
}

const { 
  title, 
  location = siteConfig.location, 
  subtitle,
  showCTA = true,
  heroImage 
} = Astro.props;

const baseUrl = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;

// Determine background image URL based on heroImage prop
const bgImageUrl = heroImage ? `${baseUrl}assets/images/${heroImage}` : null;
---

<section class="relative text-white py-20 hero-section">
  <!-- Background image placeholder with fallback -->
  <div class="absolute inset-0 hero-bg">
    {bgImageUrl ? (
      <div
        class="absolute inset-0 bg-cover bg-center bg-gradient-to-r from-deep-green to-fresh-green"
        style={`background-image: url('${bgImageUrl}');`}
      ></div>
    ) : (
      <div class="absolute inset-0 bg-gradient-to-r from-deep-green to-fresh-green"></div>
    )}
    <!-- Dark overlay for text readability -->
    <div class="absolute inset-0 bg-black opacity-50"></div>
  </div>
  
  <!-- Content -->
  <div class="container mx-auto px-4 text-center relative z-10">
    <h1 class="text-4xl md:text-5xl font-bold mb-4 text-white drop-shadow-lg">{title}</h1>
    {subtitle && <p class="text-xl md:text-2xl mb-4 text-white opacity-90 drop-shadow-md">{subtitle}</p>}
    <p class="text-lg md:text-xl mb-8 text-white opacity-90 drop-shadow-md">Serving {location}</p>
    
    {showCTA && (
      <div class="mt-8">
        <a 
          href={`tel:${siteConfig.phone}`}
          class="inline-block bg-white text-deep-green px-8 py-4 rounded-lg font-bold text-lg hover:bg-gray-100 transition shadow-lg"
        >
          Call {siteConfig.phoneFormatted}
        </a>
      </div>
    )}
  </div>
</section>

<style>
  .hero-section {
    min-height: 400px;
  }
  
  /* Placeholder styling for missing images */
  .hero-bg div[style*="background-image"] {
    position: relative;
  }
</style>
